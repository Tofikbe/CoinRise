<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>CoinRise Exchange</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial"></script>
  <style>
    body { margin:0; font-family:Arial, sans-serif; background:#f8f9fa; color:#111; }
    header { display:flex; justify-content:space-between; align-items:center; padding:10px 20px; background:#0dcaf0; color:white; }
    header h1 { margin:0; font-size:22px; }
    nav a { margin:0 10px; color:white; text-decoration:none; font-weight:bold; }
    nav a:hover { text-decoration:underline; }
    #profile { cursor:pointer; font-weight:bold; }
    main { padding:20px; }
    .hidden { display:none; }
    .container { display:grid; grid-template-columns:1fr 300px; gap:20px; }
    #tradeBox, #portfolioBox, #loginBox, #signupBox { background:white; padding:15px; border-radius:8px; box-shadow:0 2px 6px rgba(0,0,0,0.1); }
    select, input, button { margin:5px 0; padding:8px; width:100%; border:1px solid #ccc; border-radius:5px; }
    button { background:#0dcaf0; color:white; border:none; font-weight:bold; cursor:pointer; }
    button:hover { background:#0bb2d4; }
    #message { margin-top:10px; font-weight:bold; color:green; }
    #assetsTable { width:100%; border-collapse:collapse; margin-top:10px; }
    #assetsTable th, #assetsTable td { border:1px solid #ccc; padding:8px; text-align:center; }
  </style>
</head>
<body>

<header>
  <h1>CoinRise Exchange</h1>
  <nav>
    <a href="#" onclick="showSection('trade')">Trade</a>
    <a href="#" onclick="showSection('portfolio')">Assets</a>
  </nav>
  <div id="profile" onclick="toggleProfile()">Login / Signup</div>
</header>

<main>
  <!-- Trade Section -->
  <section id="tradeSection">
    <div class="container">
      <div id="tradeBox">
        <h2>Trading Chart</h2>
        <select id="tokenSelect" onchange="loadChart()">
          <option value="KING">KING/USDT</option>
          <option value="GIVNIX">GIVNIX/USDT</option>
          <option value="BGMI">BGMI/USDT</option>
          <option value="PUBG">PUBG/USDT</option>
        </select>
        <canvas id="chart" height="300"></canvas>
      </div>
      <div id="tradePanel">
        <h2>Trade</h2>
        <p>Balance: <span id="balance">0</span> USDT</p>
        <input type="number" id="amount" placeholder="Enter amount" />
        <button onclick="buyToken()">Buy</button>
        <button onclick="sellToken()">Sell</button>
        <div id="message"></div>
      </div>
    </div>
  </section>

  <!-- Assets Section -->
  <section id="portfolioSection" class="hidden">
    <div id="portfolioBox">
      <h2>Your Assets</h2>
      <table id="assetsTable">
        <thead>
          <tr><th>Token</th><th>Amount</th></tr>
        </thead>
        <tbody id="assetsBody"></tbody>
      </table>
    </div>
  </section>

  <!-- Login Section -->
  <section id="loginSection" class="hidden">
    <div id="loginBox">
      <h2>Login</h2>
      <input type="text" id="loginUser" placeholder="Username" />
      <input type="password" id="loginPass" placeholder="Password" />
      <button onclick="login()">Login</button>
      <p>Donâ€™t have an account? <a href="#" onclick="showSignup()">Signup</a></p>
    </div>
  </section>

  <!-- Signup Section -->
  <section id="signupSection" class="hidden">
    <div id="signupBox">
      <h2>Signup</h2>
      <input type="text" id="signupUser" placeholder="Username" />
      <input type="password" id="signupPass" placeholder="Password" />
      <button onclick="signup()">Signup</button>
    </div>
  </section>
</main>

<script>
let currentUser = null;
let users = JSON.parse(localStorage.getItem("users")||"{}");
let chart;

function showSection(sec) {
  document.getElementById("tradeSection").classList.add("hidden");
  document.getElementById("portfolioSection").classList.add("hidden");
  document.getElementById("loginSection").classList.add("hidden");
  document.getElementById("signupSection").classList.add("hidden");
  if(sec==="trade") document.getElementById("tradeSection").classList.remove("hidden");
  if(sec==="portfolio") { document.getElementById("portfolioSection").classList.remove("hidden"); loadAssets(); }
  if(sec==="login") document.getElementById("loginSection").classList.remove("hidden");
  if(sec==="signup") document.getElementById("signupSection").classList.remove("hidden");
}

function toggleProfile(){
  if(currentUser) { alert("Logged out"); currentUser=null; document.getElementById("profile").innerText="Login / Signup"; }
  else { showSection('login'); }
}

function signup(){
  let u=document.getElementById("signupUser").value;
  let p=document.getElementById("signupPass").value;
  if(users[u]){alert("User exists"); return;}
  users[u]={password:p,balance:0,assets:{KING:0,GIVNIX:0,BGMI:0,PUBG:0}};
  localStorage.setItem("users",JSON.stringify(users));
  alert("Follow our Twitter @Crypto_King877 to claim 1000 USDT reward");
  users[u].balance=1000;
  localStorage.setItem("users",JSON.stringify(users));
  alert("Reward added to your account!");
  showSection("login");
}

function login(){
  let u=document.getElementById("loginUser").value;
  let p=document.getElementById("loginPass").value;
  if(users[u]&&users[u].password===p){ currentUser=u; document.getElementById("profile").innerText=u; showSection("trade"); updateBalance();}
  else alert("Invalid credentials");
}

function updateBalance(){ if(currentUser) document.getElementById("balance").innerText=users[currentUser].balance; }

function buyToken(){
  let amt=parseFloat(document.getElementById("amount").value);
  if(!amt||amt<=0) return;
  if(users[currentUser].balance<amt){alert("Not enough balance");return;}
  let t=document.getElementById("tokenSelect").value;
  users[currentUser].balance-=amt;
  users[currentUser].assets[t]+=amt;
  localStorage.setItem("users",JSON.stringify(users));
  document.getElementById("message").innerText="Buy successful!";
  updateBalance();
}
function sellToken(){
  let amt=parseFloat(document.getElementById("amount").value);
  if(!amt||amt<=0) return;
  let t=document.getElementById("tokenSelect").value;
  if(users[currentUser].assets[t]<amt){alert("Not enough tokens");return;}
  users[currentUser].balance+=amt;
  users[currentUser].assets[t]-=amt;
  localStorage.setItem("users",JSON.stringify(users));
  document.getElementById("message").innerText="Sell successful!";
  updateBalance();
}

function loadAssets(){
  let tb=document.getElementById("assetsBody"); tb.innerHTML="";
  for(let tok of ["KING","GIVNIX","BGMI","PUBG"]){
    let amt=users[currentUser].assets[tok];
    tb.innerHTML+=`<tr><td>${tok}</td><td>${amt}</td></tr>`;
  }
}

function fakeData(){
  let data=[]; let t=Date.now();
  let price=50+Math.random()*50;
  for(let i=0;i<30;i++){
    let o=price+Math.random()*10-5;
    let h=o+Math.random()*5;
    let l=o-Math.random()*5;
    let c=l+Math.random()*(h-l);
    data.push({x:new Date(t+i*60000), o,h,l,c});
    price=c;
  }
  return data;
}

function loadChart(){
  let ctx=document.getElementById("chart").getContext("2d");
  if(chart) chart.destroy();
  chart=new Chart(ctx,{type:"candlestick",data:{datasets:[{label:document.getElementById("tokenSelect").value,data:fakeData()}]}});
}

loadChart();
</script>
</body>
</html>
